<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment=process_Path_Inc>
    <div style="line-height: 25px;">
        <div id="process_path_inc_loading" style="position: absolute;top: 49%;width: 100%;text-align: center;">
            <span style="font-size: 60px;">Loading</span>
        </div>
        <div id="process_path_inc_load_fail"
             style="position: absolute;top: 49%;width: 100%;text-align: center;display: none;">
            <span style="font-size: 60px;">Load Fail</span>
        </div>
        <div id="process_path_inc_no_data"
             style="position: absolute;top: 49%;width: 100%;text-align: center;display: none;">
            <span style="font-size: 60px;">No Data</span>
        </div>
        <div id="process_path_inc_load_data" style="display:none;">
            <div style="padding: 12px 0px 12px 18px; border-bottom: 1px solid rgb(192, 192, 192);">
                <div style="padding: 0px 0px 6px; white-space: nowrap; overflow: hidden; width: 200px; font-weight: bold;">
                    Process Path Information
                </div>
                <span>From：</span>
                <span id="span_processPathVo_from"/><br>
                <span>OutPort：</span>
                <span id="span_processPathVo_outport"/><br>
                <span>InPort：</span>
                <span id="span_processPathVo_inport"/><br>
                <span>To：</span>
                <span id="span_processPathVo_to"/><br>
            </div>
            <div id="div_view_flow_data" style="padding: 12px 0px 12px 18px;display: none;">
                <input type="button" class="btn btn-primary" value="View Flow Data">
            </div>
        </div>
    </div>
</div>
<script th:inline="javascript">
    var processID = [[${processId}]];
    var pageID = [[${pageId}]];

    function initProcessPathIncPageData(processID, pageID) {
        $.ajax({
            cache: true,//Keep cached data
            type: "get",//Request for get
            url: "/piflow-web/process/queryProcessPathData",//This is the name of the file where I receive data in the background.
            //data:$('#loginForm').serialize(),//Serialize the form
            data: {
                processId: processID,
                pageId: pageID
            },
            async: true,//Setting it to true indicates that other code can still be executed after the request has started. If this option is set to false, it means that all requests are no longer asynchronous, which also causes the browser to be locked.
            error: function (request) {//Operation after request failure
                $('#process_path_inc_loading').hide();
                $('#process_path_inc_load_fail').show();
                alert("Request Failed");
                return;
            },
            success: function (data) {//Operation after request successful
                var dataMap = JSON.parse(data);
                $('#process_path_inc_loading').hide();
                if (200 === dataMap.code) {
                    var processPathVo = dataMap.processPathVo;
                    if (!processPathVo) {
                        $('#process_path_inc_no_data').show();
                    } else {
                        // Process Path Information
                        $("#span_processPathVo_from").text(processPathVo.from);
                        $("#span_processPathVo_outport").text(processPathVo.outport);
                        $("#span_processPathVo_inport").text(processPathVo.inport);
                        $("#span_processPathVo_to").text(processPathVo.to);

                        if (dataMap.runModeType && dataMap.runModeType.value === 'DEBUG') {
                            $("#div_view_flow_data").html('<input type="button" class="btn btn-primary" onclick="getDebugData(\'' + processPathVo.from + '\',\'' + processPathVo.outport + '\')" value="View Flow Data">');
                        }

                        $('#process_path_inc_load_data').show();
                    }
                } else {
                    $('#process_path_inc_load_fail').show();
                    //alert("Load Failed" + dataMap.errorMsg);
                }
                $('#fullScreen').hide();
            }
        });
    }

    $(document).ready(function () {
        initProcessPathIncPageData(processID, pageID);
    });
</script>
</body>
</html>
