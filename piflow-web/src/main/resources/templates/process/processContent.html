<!--[if IE]>
<meta http-equiv="X-UA-Compatible" content="IE=5,IE=9"><![endif]-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ProcessContent</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta th:include="Macro/csrfTokeHeadMacro :: csrfTokeHeadMacro"/>
    <link rel="stylesheet" type="text/css" th:href="@{/grapheditor/styles/grapheditor.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/components/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" th:href='@{/custom/css/publicMacro.css}'/>
    <link rel="stylesheet" type="text/css" th:href='@{/custom/css/publicMacro.css}'/>
    <link rel="stylesheet" type="text/css" th:href="@{/custom/css/fullScreen.css}"/>
    <link rel="stylesheet" type="text/css" th:href="@{/components/layui/css/layui.css}"/>

    <!--[if IE 8]>
    <link rel="stylesheet" type="text/css" th:href='@{/css/ie8.css}'/>
    <![endif]-->

    <!-- The fav icon -->
    <link rel="shortcut icon" th:href="@{/img/logo.ico}">
    <script type="text/javascript" th:src='@{/js/jquery/jquery.min.js}'></script>
    <script type="text/javascript" th:src="@{/components/layui/layui.all.js}"></script>
</head>
<body class="geEditor">
<div th:include="Macro/publicMacro :: userHeadMacro"></div>
<div style="position: fixed; z-index: 779;text-align: right;right: 27%;top: 58px;">
			<span>
				progressï¼š<span id="progress" th:text="${percentage} + '%'"></span>
			</span>
    <input id="runFlow" type="button" class="btn btn-default" onclick="getCheckpoint()" value="Run"/>
    <input id="debugFlow" type="button" class="btn btn-default" onclick="getCheckpoint('DEBUG')" value="Debug"/>
    <input id="stopFlow" type="button" class="btn btn-danger" onclick="stopProcess()" value="Stop"/>
    <input type="button" class="btn btn-primary" onclick="getLogUrl()" value="Log"/>
</div>
<div id="processContent" th:onclick="'queryProcess(\''+${processId}+'\')'"
     style="overflow: auto; position: fixed; top: 48px; bottom: 28px;left: 0%;right: 25%; z-index: 778;">
    <div class="geBackgroundPage"
         style="position: absolute;border-width: 1px;overflow: hidden;width: 2391px;height: 2167px;border-color: rgb(202, 202, 202);border-style: solid;background-color: rgb(255, 255, 255);background-image: url(&quot;data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=&quot;);background-position: -1px -1px;"></div>
</div>

<div id="processLeft" class="geSidebarContainer"
     style="right: 0px;top: 48px;bottom: 28px;left: 75%;background-color: whitesmoke;font-size: 12px;">
    <div th:include="process/inc/process_Info_Inc :: process_Info_Inc"></div>
</div>
<!-- crumbs -->
<div style=" width: 100%;position: fixed;z-index: 99999;left: 0px;bottom: 0px;text-align: center;height: 28px;line-height: 28px;background: #37714b;">
    <span id="web_flowList_navigation" style="display: none;">
        <span style="color: #ffffff">
            <a style="color: #ffffff" th:href="@{/web/flowList}">FlowList</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span id="grapheditor_home_navigation" style="display: none;">
        <span style="color: #ffffff;">
            <a style="color: #ffffff" th:href="@{/grapheditor/home} + '?load=' + ${processVo.flowId}">Flow</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span id="web_processGroupList_navigation" style="display: none;">
        <span style="color: #ffffff">
            <a style="color: #ffffff" th:href="@{/web/processGroupList}">ProcessGroupList</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span id="web_getProcessGroupById_navigation" style="display: none;">
        <span style="color: #ffffff">
            <a style="color: #ffffff" th:href="@{/processGroup/getProcessGroupById} + '?processGroupId=' + ${processGroupId}">ProcessGroup</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span id="web_groupTypeProcessList_navigation" style="display: none;">
        <span style="color: #ffffff">
            <a style="color: #ffffff" th:href="@{/web/groupTypeProcessList}">FlowProcess</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span id="web_processList_navigation">
        <span style="color: #ffffff">
            <a style="color: #ffffff" th:href="@{/web/processList}">Process</a>
        </span>
        <span style="color: #ffffff">&gt;&gt;</span>
    </span>
    <span style="color: #ffffff; font-weight: bold">ProcessContent</span>
</div>
<!-- Modal Checkpoint -->
<div class="modal" id="checkpointShow" aria-labelledby="myModalLabelPort" data-backdrop="static">
    <div id="modalPort" class="modal-dialog" role="document">
        <div class="modal-content" style="width: 100%;  top: 77px;">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabelPort">Please select Checkpoint or submit directly</h4>
            </div>
            <div id="checkpointContent" class="modal-body">
                No checkpoint information was queried
                <input type="checkbox" value="">
            </div>
            <div class="modal-footer">
                <button id="run_checkpoint" type="button" class="btn btn-default" onclick="runProcess()">Submit</button>
                <button id="debug_checkpoint" type="button" class="btn btn-default" onclick="runProcess('DEBUG')">Submit</button>
                <button type="button" class="btn btn-default" onclick="cancelRunProcess()">Cancel</button>
            </div>
        </div>
    </div>
</div>
<div style="z-index: 0;position: fixed;/*display: none;*/">
    <div id="layer_open_checkpoint">
        <div id="checkpointContentNew" style="width: 100%; margin-left: 10px;margin-top: 10px;">
            No checkpoint information was queried
            <input type="checkbox" value="">
        </div>
        <hr>
        <div style="text-align: right;">
            <button id="run_checkpoint_new" type="button" class="btn btn-default" onclick="runProcess()">Submit1</button>
            <button id="debug_checkpoint_new" type="button" class="btn btn-default" onclick="runProcess('DEBUG')">Submit2</button>
        </div>
    </div>
</div>
<!-- Modal Log -->
<div class="modal fade" id="myModal" aria-labelledby="myModalLabel" data-backdrop="static">
    <div id="modalDialog" class="modal-dialog" role="document">
        <div class="modal-content" style="top: 20px;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="myModalLabel">Log Windows</h4>
            </div>
            <div class="modal-body">
                <!-- <div id="logTitle">loading.....</div> -->
                <table border="1" style="width: 100%; height: 100%;">
                    <tr style="height: 90%;">
                        <td id="customContent">
                            loading.....
                        </td>
                    </tr>
                </table>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div th:include="Macro/fragmentMacro :: fullScreen"></div>
<div id="pre_test">
    <pre>{
  "flow" : {
    "executorNumber" : "1",
    "checkpoint" : "Merge,SelectField",
    "driverMemory" : "1g",
    "executorMemory" : "1g",
    "executorCores" : "1",
    "paths" : [ {
      "inport" : "data2",
      "from" : "CsvParser",
      "to" : "Merge",
      "outport" : ""
    }, {
      "inport" : "",
      "from" : "Fork",
      "to" : "CsvSave",
      "outport" : "out2"
    }, {
      "inport" : "",
      "from" : "XmlParser",
      "to" : "SelectField",
      "outport" : ""
    }, {
      "inport" : "data1",
      "from" : "SelectField",
      "to" : "Merge",
      "outport" : ""
    }, {
      "inport" : "",
      "from" : "Fork",
      "to" : "PutHiveStreaming",
      "outport" : "out1"
    }, {
      "inport" : "",
      "from" : "Merge",
      "to" : "Fork",
      "outport" : ""
    }, {
      "inport" : "",
      "from" : "Fork",
      "to" : "JsonSave",
      "outport" : "out3"
    } ],
    "name" : "Example1",
    "stops" : [ {
      "customizedProperties" : { },
      "name" : "PutHiveStreaming",
      "uuid" : "bdfee70edd8644edbe9308f3104c648a",
      "bundle" : "cn.piflow.bundle.hive.PutHiveStreaming",
      "properties" : {
        "database" : "sparktest",
        "table" : "dblp_phdthesis"
      }
    }, {
      "customizedProperties" : { },
      "name" : "CsvSave",
      "uuid" : "6e2c2d5da8ff4d5cb9074cb71bcab136",
      "bundle" : "cn.piflow.bundle.csv.CsvSave",
      "properties" : {
        "csvSavePath" : "hdfs://10.0.86.89:9000/xjzhu/phdthesis_result.csv",
        "delimiter" : ",",
        "header" : "true"
      }
    }, {
      "customizedProperties" : { },
      "name" : "XmlParser",
      "uuid" : "3b4761ff9085427694f0a5ba91321feb",
      "bundle" : "cn.piflow.bundle.xml.XmlParser",
      "properties" : {
        "rowTag" : "phdthesis",
        "xmlpath" : "hdfs://10.0.86.89:9000/xjzhu/dblp.mini.xml"
      }
    }, {
      "customizedProperties" : { },
      "name" : "SelectField",
      "uuid" : "dd038cebc27149bbb8d9d0913ebf5324",
      "bundle" : "cn.piflow.bundle.common.SelectField",
      "properties" : {
        "schema" : "title,author,pages"
      }
    }, {
      "customizedProperties" : { },
      "name" : "JsonSave",
      "uuid" : "293081d6ed65407b98da1cbf74201ddd",
      "bundle" : "cn.piflow.bundle.json.JsonSave",
      "properties" : {
        "jsonSavePath" : "hdfs://10.0.86.89:9000/xjzhu/phdthesis.json"
      }
    }, {
      "customizedProperties" : { },
      "name" : "CsvParser",
      "uuid" : "63182a0e62424f958a3f2358536fb0dd",
      "bundle" : "cn.piflow.bundle.csv.CsvParser",
      "properties" : {
        "schema" : "title,author,pages",
        "csvPath" : "hdfs://10.0.86.191:9000/xjzhu/phdthesis.csv",
        "delimiter" : ",",
        "header" : "false"
      }
    }, {
      "customizedProperties" : { },
      "name" : "Merge",
      "uuid" : "e9d5971c74d6446ca7f0f0504ee4878e",
      "bundle" : "cn.piflow.bundle.common.Merge",
      "properties" : {
        "inports" : "data1,data2"
      }
    }, {
      "customizedProperties" : { },
      "name" : "Fork",
      "uuid" : "db94146429654bb8af626bfd8168e7f0",
      "bundle" : "cn.piflow.bundle.common.Fork",
      "properties" : {
        "outports" : "out1,out2,out3"
      }
    } ],
    "uuid" : "7462b3027979468290eba19cecdf743d"
  }
}
Map(flow -&gt; Map(name -&gt; Example1, executorMemory -&gt; 1g, executorNumber -&gt; 1, uuid -&gt; 7462b3027979468290eba19cecdf743d, paths -&gt; List(Map(inport -&gt; data2, from -&gt; CsvParser, to -&gt; Merge, outport -&gt; ), Map(inport -&gt; , from -&gt; Fork, to -&gt; CsvSave, outport -&gt; out2), Map(inport -&gt; , from -&gt; XmlParser, to -&gt; SelectField, outport -&gt; ), Map(inport -&gt; data1, from -&gt; SelectField, to -&gt; Merge, outport -&gt; ), Map(inport -&gt; , from -&gt; Fork, to -&gt; PutHiveStreaming, outport -&gt; out1), Map(inport -&gt; , from -&gt; Merge, to -&gt; Fork, outport -&gt; ), Map(inport -&gt; , from -&gt; Fork, to -&gt; JsonSave, outport -&gt; out3)), executorCores -&gt; 1, checkpoint -&gt; Merge,SelectField, driverMemory -&gt; 1g, stops -&gt; List(Map(name -&gt; PutHiveStreaming, bundle -&gt; cn.piflow.bundle.hive.PutHiveStreaming, uuid -&gt; bdfee70edd8644edbe9308f3104c648a, properties -&gt; Map(database -&gt; sparktest, table -&gt; dblp_phdthesis), customizedProperties -&gt; Map()), Map(name -&gt; CsvSave, bundle -&gt; cn.piflow.bundle.csv.CsvSave, uuid -&gt; 6e2c2d5da8ff4d5cb9074cb71bcab136, properties -&gt; Map(csvSavePath -&gt; hdfs://10.0.86.89:9000/xjzhu/phdthesis_result.csv, delimiter -&gt; ,, header -&gt; true), customizedProperties -&gt; Map()), Map(name -&gt; XmlParser, bundle -&gt; cn.piflow.bundle.xml.XmlParser, uuid -&gt; 3b4761ff9085427694f0a5ba91321feb, properties -&gt; Map(rowTag -&gt; phdthesis, xmlpath -&gt; hdfs://10.0.86.89:9000/xjzhu/dblp.mini.xml), customizedProperties -&gt; Map()), Map(name -&gt; SelectField, bundle -&gt; cn.piflow.bundle.common.SelectField, uuid -&gt; dd038cebc27149bbb8d9d0913ebf5324, properties -&gt; Map(schema -&gt; title,author,pages), customizedProperties -&gt; Map()), Map(name -&gt; JsonSave, bundle -&gt; cn.piflow.bundle.json.JsonSave, uuid -&gt; 293081d6ed65407b98da1cbf74201ddd, properties -&gt; Map(jsonSavePath -&gt; hdfs://10.0.86.89:9000/xjzhu/phdthesis.json), customizedProperties -&gt; Map()), Map(name -&gt; CsvParser, bundle -&gt; cn.piflow.bundle.csv.CsvParser, uuid -&gt; 63182a0e62424f958a3f2358536fb0dd, properties -&gt; Map(schema -&gt; title,author,pages, csvPath -&gt; hdfs://10.0.86.191:9000/xjzhu/phdthesis.csv, delimiter -&gt; ,, header -&gt; false), customizedProperties -&gt; Map()), Map(name -&gt; Merge, bundle -&gt; cn.piflow.bundle.common.Merge, uuid -&gt; e9d5971c74d6446ca7f0f0504ee4878e, properties -&gt; Map(inports -&gt; data1,data2), customizedProperties -&gt; Map()), Map(name -&gt; Fork, bundle -&gt; cn.piflow.bundle.common.Fork, uuid -&gt; db94146429654bb8af626bfd8168e7f0, properties -&gt; Map(outports -&gt; out1,out2,out3), customizedProperties -&gt; Map()))))
find ConfigurableStop by Class.forName: cn.piflow.bundle.common.Fork
find ConfigurableStop by Class.forName: cn.piflow.bundle.common.Merge
find ConfigurableStop by Class.forName: cn.piflow.bundle.csv.CsvParser
find ConfigurableStop by Class.forName: cn.piflow.bundle.json.JsonSave
find ConfigurableStop by Class.forName: cn.piflow.bundle.common.SelectField
find ConfigurableStop by Class.forName: cn.piflow.bundle.xml.XmlParser
find ConfigurableStop by Class.forName: cn.piflow.bundle.csv.CsvSave
find ConfigurableStop by Class.forName: cn.piflow.bundle.hive.PutHiveStreaming
hive.metastore.uris=thrift://10.0.88.71:9083!!!!!!!
jdbc:h2:tcp://10.0.86.191:50002/~/piflow;AUTO_SERVER=true
[Fork]-(out3)-()-[JsonSave]
[Merge]-()-()-[Fork]
[Fork]-(out1)-()-[PutHiveStreaming]
[SelectField]-()-(data1)-[Merge]
[XmlParser]-()-()-[SelectField]
[Fork]-(out2)-()-[CsvSave]
[CsvParser]-()-(data2)-[Merge]
process started: process_213df18a-e89d-4875-8c3e-f737c79ea35f_1, flow: cn.piflow.FlowImpl@28b574d9, time: Fri Feb 14 12:26:24 CST 2020
update flow set state='STARTED' where id='application_1562293222869_0442'
job initialized: PutHiveStreaming, time: Fri Feb 14 12:26:24 CST 2020
job initialized: SelectField, time: Fri Feb 14 12:26:24 CST 2020
job initialized: CsvSave, time: Fri Feb 14 12:26:24 CST 2020
job initialized: Fork, time: Fri Feb 14 12:26:24 CST 2020
job initialized: XmlParser, time: Fri Feb 14 12:26:24 CST 2020
job initialized: JsonSave, time: Fri Feb 14 12:26:24 CST 2020
job initialized: CsvParser, time: Fri Feb 14 12:26:24 CST 2020
job initialized: Merge, time: Fri Feb 14 12:26:24 CST 2020
job started: job_5, stop: XmlParser, time: Fri Feb 14 12:26:24 CST 2020
Visit process XmlParser!!!!!!!!!!!!!
default port:
+----------------+----------+----------------+--------------------+-----------------+-----+--------------------+--------------------+--------------------+----+
|            _key|    _mdate|          author|                  ee|             isbn|pages|              school|               title|                 url|year|
+----------------+----------+----------------+--------------------+-----------------+-----+--------------------+--------------------+--------------------+----+
|phd/dk/Heine2010|2016-05-04|    Carmen Heine|[http://d-nb.info...|978-3-86596-263-8|1-315|   Aarhus University|Modell zur Produk...|                null|2010|
|    phd/Hoff2002|2017-01-06|       Gerd Hoff|[http://ubt.opus....|             null| null|University of Tri...|Ein Verfahren zur...|                null|2002|
|   phd/Seltzer92|2015-05-21|Margo I. Seltzer|                null|             null| null|University of Cal...|File System Perfo...|http://db.cs.berk...|1992|
+----------------+----------+----------------+--------------------+-----------------+-----+--------------------+--------------------+--------------------+----+

job completed: XmlParser, time: Fri Feb 14 12:26:31 CST 2020
job started: job_2, stop: SelectField, time: Fri Feb 14 12:26:31 CST 2020
Visit process SelectField!!!!!!!!!!!!!
MakeCheckPoint Path: hdfs://10.0.86.191:9000/user/piflow/checkpoints/application_1562293222869_0442/SelectField/default
default port:
+--------------------+----------------+-----+
|               title|          author|pages|
+--------------------+----------------+-----+
|Modell zur Produk...|    Carmen Heine|1-315|
|Ein Verfahren zur...|       Gerd Hoff| null|
|File System Perfo...|Margo I. Seltzer| null|
+--------------------+----------------+-----+

job completed: SelectField, time: Fri Feb 14 12:26:35 CST 2020
job started: job_7, stop: CsvParser, time: Fri Feb 14 12:26:35 CST 2020
Visit process CsvParser!!!!!!!!!!!!!
default port:
+--------------+---------+--------+
|         title|   author|   pages|
+--------------+---------+--------+
|Effective Java|    xjzhu| 100-200|
|        Python| xiaoxiao| 200-300|
+--------------+---------+--------+

job completed: CsvParser, time: Fri Feb 14 12:26:36 CST 2020
job started: job_8, stop: Merge, time: Fri Feb 14 12:26:36 CST 2020
Visit process Merge!!!!!!!!!!!!!
MakeCheckPoint Path: hdfs://10.0.86.191:9000/user/piflow/checkpoints/application_1562293222869_0442/Merge/default
default port:
+--------------------+----------------+--------+
|               title|          author|   pages|
+--------------------+----------------+--------+
|Modell zur Produk...|    Carmen Heine|   1-315|
|Ein Verfahren zur...|       Gerd Hoff|    null|
|File System Perfo...|Margo I. Seltzer|    null|
|      Effective Java|           xjzhu| 100-200|
|              Python|        xiaoxiao| 200-300|
+--------------------+----------------+--------+

job completed: Merge, time: Fri Feb 14 12:26:40 CST 2020
job started: job_4, stop: Fork, time: Fri Feb 14 12:26:40 CST 2020
Visit process Fork!!!!!!!!!!!!!
out1 port:
+--------------------+----------------+--------+
|               title|          author|   pages|
+--------------------+----------------+--------+
|Modell zur Produk...|    Carmen Heine|   1-315|
|Ein Verfahren zur...|       Gerd Hoff|    null|
|File System Perfo...|Margo I. Seltzer|    null|
|      Effective Java|           xjzhu| 100-200|
|              Python|        xiaoxiao| 200-300|
+--------------------+----------------+--------+

out3 port:
+--------------------+----------------+--------+
|               title|          author|   pages|
+--------------------+----------------+--------+
|Modell zur Produk...|    Carmen Heine|   1-315|
|Ein Verfahren zur...|       Gerd Hoff|    null|
|File System Perfo...|Margo I. Seltzer|    null|
|      Effective Java|           xjzhu| 100-200|
|              Python|        xiaoxiao| 200-300|
+--------------------+----------------+--------+

out2 port:
+--------------------+----------------+--------+
|               title|          author|   pages|
+--------------------+----------------+--------+
|Modell zur Produk...|    Carmen Heine|   1-315|
|Ein Verfahren zur...|       Gerd Hoff|    null|
|File System Perfo...|Margo I. Seltzer|    null|
|      Effective Java|           xjzhu| 100-200|
|              Python|        xiaoxiao| 200-300|
+--------------------+----------------+--------+

job completed: Fork, time: Fri Feb 14 12:26:41 CST 2020
job started: job_1, stop: PutHiveStreaming, time: Fri Feb 14 12:26:41 CST 2020
Visit process PutHiveStreaming!!!!!!!!!!!!!
job completed: PutHiveStreaming, time: Fri Feb 14 12:26:45 CST 2020
job started: job_3, stop: CsvSave, time: Fri Feb 14 12:26:45 CST 2020
Visit process CsvSave!!!!!!!!!!!!!
job completed: CsvSave, time: Fri Feb 14 12:26:46 CST 2020
job started: job_6, stop: JsonSave, time: Fri Feb 14 12:26:46 CST 2020
Visit process JsonSave!!!!!!!!!!!!!
job completed: JsonSave, time: Fri Feb 14 12:26:46 CST 2020
process completed: process_213df18a-e89d-4875-8c3e-f737c79ea35f_1, time: Fri Feb 14 12:26:46 CST 2020
update flow set state='COMPLETED' where id='application_1562293222869_0442'
update flow set endTime='Fri Feb 14 12:26:46 CST 2020' where id='application_1562293222869_0442'
</pre>
</div>
<script type="text/javascript" th:src="@{/js/jquery/jquery-ui.min.js}"></script>
<script type="text/javascript" th:src="@{/components/bootstrap/js/bootstrap.min.js}"></script>
<script th:include="Macro/csrfTokeHeadMacro :: csrfTokeHeadMacroScript"/>
<script th:src="@{/custom/js/processContent.js}"></script>
<script th:inline="javascript">
    var parentAccessPath = [[${parentAccessPath}]];
    var xmlDate = [[${xmlDate}]];
    var processId = [[${processId}]];
    var parentProcessId = [[${parentProcessId}]];
    var pID = [[${pID}]];
    var appId = [[${appId}]];
    var processState = [[${processState}]];
    var stdoutLog = [[${stdoutLog}]];
    var stderrLog = [[${stderrLog}]];
    (function () {
        if (processContent) {
            if (xmlDate) {
                processContent.append(xmlDate);
            } else {
                processContent.prepend('<div style="position: fixed;z-index: 779;"><h1>è§†å›¾ä¸¢å¤±</h1></div>');
            }
        }
        if (runFlow) {
            if ("STARTED" === processState) {
                runFlow.hide();
                debugFlow.hide();
                stopFlow.show();
                timer = window.setInterval("processMonitoring(appId)", 5000);
            } else {
                runFlow.show();
                debugFlow.show();
                stopFlow.hide();
            }
        }
        var processStopVoListInit = [[${processStopVoListInit}]];
        if (processStopVoListInit && '' != processStopVoListInit) {
            for (var i = 0; i < processStopVoListInit.length; i++) {
                var processStopVoInit = processStopVoListInit[i];
                monitor(processStopVoInit.pageId, processStopVoInit.state);
            }
        }
        //queryProcess(processId);
        $("#modalDialog").draggable();//Add drag and drop for modal dialogs
        $("#myModal").css("overflow", "hidden");//Disable translucent background scrolling of modal dialogs
        if (parentAccessPath) {
            switch (parentAccessPath) {
                case "grapheditor":
                    $("#web_processList_navigation").hide();
                    $("#web_flowList_navigation").show();
                    $("#grapheditor_home_navigation").show();
                    break;
                case "flowProcess":
                    $("#web_processList_navigation").hide();
                    $("#web_groupTypeProcessList_navigation").show();
                    break;
                case "processGroupList":
                    $("#web_processList_navigation").hide();
                    $("#web_processGroupList_navigation").show();
                    $("#web_getProcessGroupById_navigation").show();
                    break;
            }
        }
    })();

    //When the browser window size changes
    $(window).resize(function () {
        var window_width = $(window).width();//Get browser window width
        var window_height = $(window).height();//Get browser window height
        // $('#modalDialog').height(window_height - 124);
        // $('#modalDialog').width(window_width - 124);
        $('#textareaId').height(window_height - 300);
        $('#divTextareaId').height(window_height - 300);
    });
    //@ sourceURL=processContent.js
</script>
</body>
</html>
