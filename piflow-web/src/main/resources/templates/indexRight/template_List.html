<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<body th:fragment=template_List>
    <meta th:include="Macro/csrfTokeHeadMacro :: csrfTokeHeadMacro"/>
    <style type="text/css">
        /*人为制造一个占据整个屏幕的Div,其透明度为0.7且z-index为9999使之前的页面被压在底层无法点击*/
        .fullScreenList {
            position: fixed;
            width: 100%;
            height: 100%;
            left: 0;
            top: 0;
            opacity: 0.7;
            background-color: black;
            z-index: 9999;
            text-align: center;
        }
    </style>
    <script th:src="@{/charisma/js/layer/layer.js}"></script>
    <!-- content starts -->
    <div class="wrapper" style="margin: 20px;">

        <!-- Media datatable -->
        <div class="widget">
            <div class="navbar">
                <div class="navbar-inner">
                    <h6 style="color: #1A7444">Templates</h6>
                </div>
            </div>
            <div class="navbar">
                <form id="uploadForm" enctype="multipart/form-data" method="post">
                    <input type="file" id="templateFile" name="templateFile" style="display:none;" onchange="importFile()"/>
                    <a class='btn' href='javascript:void(0);' th:onclick="'javascript:uploadTemplate();'"  style='background-color: #1A7444;border: 1px solid;color: #1A7444;' title="upload template">
                        <i class="icon-upload icon-white"></i></a>
                </form>
            </div>
            <div class="table-overflow">
                <table id="templateTableId" style="width: 100%" class="table table-striped table-bordered table-checks">
                    <thead>
                    <tr>
                        <th width="10%" style="color: #1A7444">Name</th>
                        <th width="50%" style="color: #1A7444">Templatename</th>
                        <th width="32%" style="color: #1A7444">CreateTime</th>
                        <th width="8%" style="color: #1A7444" class="actions-column">Actions</th>
                    </tr>
                    </thead>
                </table>
                <!--<table class="table table-striped table-bordered table-checks media-table">
                    <thead>
                    <tr>
                        <th style="display: none">sort</th>
                        <th style="display: none">flowId</th>
                        <th style="display: none">templateId</th>
                        <th>flowName</th>
                        <th>templateName</th>
                        <th>createTime</th>
                        <th class="actions-column">Actions</th>
                    </tr>
                    </thead>
                    <tbody th:unless="${TemPlateList}">
                    </tbody>
                    <tbody th:if="${TemPlateList}">
                    <tr th:each='list:${TemPlateList}'>
                        <td style="display: none" th:text="${listStat.index}"></td>
                        <td style="display: none" th:text="${list.flow?.id}"></td>
                        <td style="display: none" th:text="${list.id}" ></td>
                        <td class="center" th:text="${list.flow?.name} ? ${list.flow?.name} : 'no flowName'"></td>
                        <td class="center" th:text="${list.name}"></td>
                        <td th:text="${#dates.format(list.crtDttm, 'yyyy-MM-dd HH:mm:ss')}"></td>
                        <td class="center" style="white-space: nowrap;">
                            <a class="btn" href="javascript:void(0);" style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;"
                               th:onclick="'javascript:downloadTemplate(\''+${list.id}+'\');'"
                               title="download template">
                                <i class="icon-download icon-white"></i>
                            </a>
                            <a class="btn" href="javascript:void(0);"
                               style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;"
                               th:onclick="'javascript:deleteTemPlate(\''+${list.id}+'\',\''+${list.name}+'\');'"
                               title="delete template" >
                                <i class="icon-trash icon-white"></i>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>-->
            </div>
        </div>
        <!-- /media datatable -->
    </div>
    <!-- content ends -->
    <div id='fullScreenList' class="fullScreenList" style="display: none;">
        <div style="margin-top: 15%;">
            <p>
                <img th:src="@{/img/fullScreen.gif}" alt="">
            </p>
        </div>
    </div>
    <script th:include="Macro/csrfTokeHeadMacroScript :: csrfTokeHeadMacroScript"/>
    <script th:src="@{/custom/templateList.js}"></script>
    <script th:inline="javascript">

        initDatatableTemplatePage('templateTableId', "/piflow-web/template/templatePage");


        //@ sourceURL=template_List.js
    </script>
</body>
</html>
