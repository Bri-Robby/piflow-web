<!--[if IE]>
<meta http-equiv="X-UA-Compatible" content="IE=5,IE=9"><![endif]-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>piflow-web</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta th:include="Macro/csrfTokeHeadMacro :: csrfTokeHeadMacro"/>
    <link rel="stylesheet" type="text/css" href="/piflow-web/components/mxGraph/styles/grapheditor.css">
    <link rel="stylesheet" type="text/css" href="/piflow-web/components/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/piflow-web/custom/css/publicMacro.css"/>
    <link rel="stylesheet" type="text/css" href="/piflow-web/custom/css/fullScreen.css"/>
    <link rel="stylesheet" type="text/css" href="/piflow-web/components/font-awesome-4.7.0/css/font-awesome.min.css"/>
    <link rel="shortcut icon" href="/piflow-web/img/logo.ico">
    <style>
        .btn-position {
            float: right;
            margin-right: 8px
        }

        .btn-position .btn {
            margin: 6px 6px 2px 0 !important;
        }

        .customize_btn_css {
            display: inline-block;
            padding: 6px 12px;
            margin-bottom: 0;
            font-size: 14px;
            font-weight: 400;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            touch-action: manipulation;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            border-radius: 4px;
            background: #1A8B5F;
            color: #ffffff;
            height: 34px;
            text-decoration: none;
        }

        a.customize_btn_css:hover {
            color: #ffffff;
        }

        a.customize_btn_css:focus {
            color: #ffffff;
        }
    </style>
    <meta th:include="mxGraph/inc/index_graph_improt :: index_graph_improt"/>
    <link rel="stylesheet" type="text/css" href="/piflow-web/css/main.css"/>
</head>
<body class="geEditor">
<div th:include="Macro/fragmentMacro :: fullScreen"></div>
<div th:include="Macro/publicMacro :: userHeadMacro"></div>

<!-- run button -->
<div style="width: 30.2%;top: 48px;right: 0px;height: 50px;position: absolute;z-index: 1001;">
    <div style="float: right;" th:include="flow/inc/graphEditor_menus_task :: graphEditor_menus_task"></div>
</div>

<!-- crumbs -->
<div style="width: 100%;position: fixed;z-index: 99999;float: left;left: 0px;bottom: 0px;text-align: center;height: 28px;line-height: 28px; background: #37714b;">
    <div th:include="flow/inc/graphEditor_crumbs_task :: graphEditor_crumbs_task"></div>
</div>

<!-- ***************************************** new start ***************************************** -->

<div id="portShowDiv" class="modal-content" style="display:none;width: 100%;  top: 77px">
    <div class="modal-body">
        <from id="portInfo1Copy">
            <div id="sourceTitle1Copy">
                <span id="sourceTitleStr1Copy" style="font-size: 20px">Source:</span>
                <div id="sourceTitleCheckbox1Copy">
                    <input type="checkbox" class="addCheckbox" checked="checked" disabled="disabled">
                    <span class="addCheckbox">default</span>
                </div>
                <div class="layui-row" id="sourceTitleBtn1Copy">
                    <div class="layui-col-xs7">
                        <input type="text" class="addCrtBtn form-control" id="sourceCrtPortId1Copy">
                    </div>
                    <div class="layui-col-xs5">
                           <span class="input-group-btn">
                                <button id="sourceCrtPortBtnId1Copy" type="button" class="addCrtBtn btn btn-default"
                                        onclick="crtAnyPort('sourceCrtPortId1Copy',true)">
                                    CrtPort
                                </button>
                            </span>
                    </div>
                </div>
                <div class="layui-row" id="sourceRouteFilterList1Copy">
                    <div class="layui-col-xs7">
                        <select id="sourceRouteFilterSelect1Copy" class="form-control" style="width: 100%;">
                            <option value="">Please click Select Filter Country</option>
                        </select>
                    </div>
                    <div class="layui-col-xs5">
                    </div>
                </div>
                <div id="sourceTypeDiv1Copy" style="display: none;"></div>
            </div>
            <hr/>
            <div id="targetTitle1Copy">
                <span id="targetTitleStr1Copy" style="font-size: 20px">Target:</span>
                <div id="targetTitleCheckbox1Copy">
                    <input type="checkbox" class="addCheckbox" checked="checked" disabled="disabled">
                    <span class="addCheckbox">default</span>
                </div>
                <div class="layui-row" id="targetTitleBtn1Copy">
                    <div>
                        <div class="layui-col-xs7">
                            <input type="text" class="addCrtBtn form-control" id="targetCrtPortId1Copy">
                        </div>
                        <div class="layui-col-xs5">
                           <span class="input-group-btn">
                                <button id="targetCrtPortBtnId1Copy" type="button" class="addCrtBtn btn btn-default"
                                        onclick="crtAnyPort('targetCrtPortId',true)">
                                    CrtPort
                                </button>
                           </span>
                        </div>
                    </div>
                </div>
                <div class="layui-row" id="targetRouteFilterList1Copy">
                    <div class="layui-col-xs7">
                        <select id="targetRouteFilterSelect1Copy" class="form-control" style="width: 100%;">
                            <option value="">Please click Select Filter Country</option>
                        </select>
                    </div>
                    <div class="layui-col-xs5">
                    </div>
                </div>
                <div id="targetTypeDiv1Copy" style="display: none;"></div>
            </div>
        </from>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default" onclick="choosePortNew()">Submit</button>
        <button type="button" class="btn btn-default" onclick="cancelPortAndPathNew()">Cancel</button>
    </div>
</div>

<!--stop Property edit popover starts-->
<div style="display: none;" id="stopOpenTemplate">
    <div style="height: 90%;">
        <form class="layui-form" action="" style="height: 100%;">
            <div class="layui-form-text" style="margin-left: 12px; text-align: center;height: 100%;">
                <textarea id="stopValue" placeholder="please input ..." class="layui-textarea"
                          style="margin-left: -6px;margin-bottom: 6px;resize:none;height: 80%;"></textarea>
                <div style="height: 20%;">
                    <button type="button" class="layui-btn layui-btn-primary" id="buttonStop">save
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!--stop Property edit popover ends-->

<!-- 'stop' custom attribute add popup start -->
<div style="display: none;" id="addStopCustomizedAttrOpenTemplate">
    <form class="layui-form" action="" style="margin: 10px;" method="post">
        <input id="openAddCustomizedWindowStopId" name="stopId"/>
        <div class="layui-form-item">
            <label class="layui-form-label">Key</label>
            <div class="layui-input-block">
                <input type="text"
                       style="width: 95%;"
                       name="name"
                       lay-verify="required"
                       placeholder="please input key ..."
                       class="layui-input"/>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">CustomValue</label>
            <div class="layui-input-block">
                <input type="text"
                       style="width: 95%;"
                       name="customValue"
                       lay-verify="required"
                       placeholder="please input customValue ..."
                       class="layui-input"/>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">SDescription</label>
            <div class="layui-input-block">
                    <textarea name="description"
                              style="width: 95%;"
                              lay-verify="required"
                              placeholder="please input description ..."
                              class="layui-textarea"></textarea>
            </div>
        </div>
        <div class="layui-form-item" style="text-align: center;margin-right: 90px;margin-top: -8px;">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit="" lay-filter="component-form-submit">save</button>
            </div>
        </div>
    </form>
</div>
<!-- 'stop' custom attribute add popup end -->

<!-- 'stop' custom attribute editing popup start -->
<div style="display: none;" id="stopCustomizedAttrOpenTemplate">
    <form class="layui-form" action="">
        <div class="layui-form-item layui-form-text">
            <div class="layui-input-block">
                <textarea id="stopCustomizedAttrValueTemplate" placeholder="please input ..." class="layui-textarea"
                          style="width: 272px;margin-left: -100px;resize:none;"></textarea>
            </div>
        </div>
        <div class="layui-form-item" style="text-align: center;margin-right: 90px;margin-top: -8px;">
            <div class="layui-input-block">
                <button type="button" class="layui-btn layui-btn-primary" id="buttonStopCustomizedAttrTemplate">
                    save
                </button>
            </div>
        </div>
    </form>
</div>
<!-- 'stop' custom attribute editing popup start -->

<!-- change image start -->
<div style="display: none;;padding:20px" id="changeimage">
    <br>
    <p>已有现存可选择更改的图片</p>
    <!--    <form class="layui-form" action="">-->
    <div id="nowimage" style="width:100%;height:220px;overflow-y:auto"></div>
    <div style="width:100%;height:1px;border-bottom:1px solid #000;margin:10px 0"></div>
    <button type="button" class="layui-btn" id="uploadimage">
        <i class="layui-icon">&#xe67c;</i>上传图片
    </button>
    <!--    </form>-->
</div>
<!-- change image end -->

<!-- right attribute start -->
<div id="right-group-wrap" style="position:absolute;right:0;top:86px;width:25%;;height:88%;transition: 2s">
    <div class="ExpandSidebar">
        <div class="triggerSlider">
            <i style="color: white" class="fa fa-angle-left fa-2x"></i>
        </div>
    </div>
    <div id="right-group" class="right-group">
        <!--flow info -->
        <div id="flow_info_inc_id" style="display: none;">
            <div th:include="flow/inc/flow_info_inc :: flow_info_inc"></div>
        </div>
        <!--path info -->
        <div id="flow_path_inc_id" style="display: none;">
            <div th:include="flow/inc/flow_path_inc :: flow_path_inc"></div>
        </div>
        <!--stops info -->
        <div id="flow_property_inc_id" style="display: none;">
            <div th:include="flow/inc/flow_property_inc :: flow_property_inc"></div>
        </div>
    </div>
</div>
<!-- right attribute end -->

<!-- ***************************************** new end ***************************************** -->

<script th:src="@{/custom/js/processGroupContent.js}"></script>
<script th:src="@{/custom/js/processContent.js}"></script>
<script th:include="Macro/csrfTokeHeadMacro :: csrfTokeHeadMacroScript"/>
<script type="text/javascript" src="/piflow-web/custom/js/flow/initFlowGraph.js"></script>
<script th:inline="javascript">
    var loadId = [[${load}]];
    var parentAccessPath = [[${parentAccessPath}]];


    (function () {
        if (parentAccessPath) {
            switch (parentAccessPath) {
                case "grapheditor":
                    $("#web_processList_navigation").hide();
                    $("#web_flowList_navigation").show();
                    $("#grapheditor_home_navigation").show();
                    break;
                case "flowProcess":
                    $("#web_processList_navigation").hide();
                    $("#web_groupTypeProcessList_navigation").show();
                    break;
                case "processGroupList":
                    $("#web_processList_navigation").hide();
                    $("#web_processGroupList_navigation").show();
                    $("#web_getProcessGroupById_navigation").show();
                    break;
            }
        }
    })();
    $(document).ready(function () {

        initFlowDrawingBoardData(loadId, parentAccessPath);
        initGraph();
        //getRightInfo();
        layui.form.on('submit(component-form-submit)', function (data) {
            addStopCustomProperty(data.field);
            return false;
        });
        if ("flowGroupList" === parentAccessPath) {
            $("#web_flowGroupList_navigation").show();
            $("#web_flowList_navigation").hide();
            if (parentsId) {
                $("#grapheditor_groupDrawingBoard_navigation").show();
            } else {
                $("#grapheditor_groupDrawingBoard_navigation").hide();
            }
        }
        $("#graphEditor_task_menus_id").show();
        initAttrTabPage();
    });

    function initAttrTabPage() {
        $("#tab>li").click(function () {
            $(this).removeAttr("style").siblings("li").attr("style", "background-color: rgb(218,218,218); border-color: rgb(192,192,192);");
            $("#tab_content" + $(this).val()).show().siblings("div").hide();
        });
    }

    //@ sourceURL=flowMxGraphIndex.js

</script>
</body>
</html>
