<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
  <body>
    <div th:fragment=table>
<script th:src="@{/charisma/js/layer/layer.js}"></script>
<!-- content starts -->
<div class="row"><!--row-->
	<div class="box col-md-12"><!--span-->
        <div class="box-content">
            <div class="alert alert-info">
                <a class='btn' href='javascript:void(0);' onclick="newPath();" style='background-color: #C0C0C0;border: 1px solid;color: #080808;'><i class='glyphicon glyphicon-plus-sign icon-white'></i>
                    create flow</a>
            </div>
            <div class="tableDiv" style="overflow: scroll;">
                <table class="table table-striped table-bordered bootstrap-datatable datatable responsive">
                    <thead>
                    <tr>
                        <th style="display: none">flowId</th>
                        <th style="display: none">appId</th>
                        <th>name</th>
                        <th>description</th>
                        <th>startTime</th>
                        <th>finishedTime</th>
                        <th>progress</th>
                        <th>state</th>
                        <th>Actions</th>
                        <th style="display: none">driverMemory</th>
                        <th style="display: none">executorNumber</th>
                        <th style="display: none">executorMemory</th>
                        <th style="display: none">executorCores</th>
                    </tr>
                    </thead>
                    <tbody id="tableData">
                    <tr th:each='list:${appInfo}'>
                        <td style="display: none" th:text="${list.id}" ></td>
                        <td style="display: none" class="center" th:text="${list.appId?.id}"></td>
                        <td class="center" th:text="${list.name}"></td>
                        <td class="center" th:text="${list.description}"></td>
                        <td th:text="${#dates.format(list.appId?.startTime, 'yyyy-MM-dd HH:mm:ss')}" ></td>
                        <td th:text="${#dates.format(list.appId?.endTime, 'yyyy-MM-dd HH:mm:ss')}" ></td>
                        <td class="center" ><div id='d'> <p th:id='${list.appId?.id}+Info' th:text="${list.appId?.progress}?'进度'+${list.appId?.progress}+'%':'进度0%'"></p><progress th:id='${list.appId?.id}' max='100' th:value="${list.appId?.progress}"></progress></div></td>
                        <td class="center" th:text="${list.appId?.state}?${list.appId?.state}:'No state'" th:id='${list.appId?.id}+state'></td>
                         <td style="display: none" class="center" th:text="${list.driverMemory}?${list.driverMemory}:'1g'"></td>
                          <td style="display: none" class="center" th:text="${list.executorNumber}?${list.executorNumber}:'1'"></td>
                           <td style="display: none" class="center" th:text="${list.executorMemory}?${list.executorMemory}:'1g'"></td>
                            <td style="display: none" class="center" th:text="${list.executorCores}?${list.executorCores}:'1'"></td>
                        <td class="center" style="white-space: nowrap;">
                            <a class="btn" th:href="'/piflow-web/grapheditor/home?load='+${list.id}+''" target="_blank" style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;">
                                <i class="glyphicon glyphicon-share-alt icon-white"></i>
                            </a>
                            <a class="btn" href="javascript:void(0);" th:onclick="'javascript:update(\''+${list.id}+'\',\''+${list.name}+'\',\''+${list.description}+'\',\''+${list.driverMemory}+'\',\''+${list.executorNumber}+'\',\''+${list.executorMemory}+'\',\''+${list.executorCores}+'\');'"
                               style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;">
                                <i class="glyphicon glyphicon-edit icon-white"></i>
                            </a>
                            <a class="btn" href="javascript:void(0);" style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;" th:onclick="'javascript:runFlow(\''+${list.id}+'\');'" >
                                <i class="glyphicon glyphicon-play icon-white"></i>
                            </a>
                            <a class="btn" href="javascript:void(0);" style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;" th:onclick="'javascript:stopFlow(\''+${list.id}+'\');'">
                                <i class="glyphicon glyphicon-stop icon-white"></i>
                            </a>
                            <a class="btn" href="javascript:void(0);" style="background-color: #C0C0C0;border: 1px solid;color: #6b5555;" th:onclick="'javascript:deleteFlow(\''+${list.id}+'\',\''+${list.name}+'\');'">
                                <i class="glyphicon glyphicon-trash icon-white"></i>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!--/span-->
</div><!--/row-->

<!-- content ends -->
    </div>
  </body>
</html>